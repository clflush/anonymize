#!/usr/bin/emacs --script
(let ((script (nth 2 command-line-args)))

  (add-to-list 'load-path (file-name-directory script))
  (require 'anonymize)
  (error "currently doesn't work because no fontification in batch mode")

  (unless (>= (length command-line-args) 5)
    (error "Insufficient arguments to %s" script))

  (let ((in-file (nth 3 command-line-args))
        (out-file (nth 4 command-line-args)))

    (unless (file-exists-p in-file)
      (error "Missing input file %s" in-file))

    (when (file-exists-p out-file)
      (error "Output file %s already exists" out-file))

    (anonymize in-file out-file)))

;; Local Variables:
;; mode: emacs-lisp
;; End:
